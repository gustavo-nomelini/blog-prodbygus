---
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import Layout from '../../layouts/Layout.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Blog | PRODBYGUS" description="Compartilhando conhecimento e experiências no mundo da tecnologia.">
	<section class="section-padding">
		<div class="mx-auto max-w-4xl">
			<h1 class="text-gradient mb-8 text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight">
				Blog
			</h1>
			<p class="text-xl mb-10">
				Compartilhando conhecimento e experiências no mundo da tecnologia.
			</p>
		</div>
	</section>

	<section class="mb-16">
		<div class="mx-auto max-w-7xl px-4 lg:px-8">
			<div class="mx-auto max-w-4xl lg:max-w-6xl">
				<div class="mt-12 space-y-16">
					{posts.map((post) => (
						<article class="card group hover:bg-surface-50 hover:shadow-lg hover:shadow-[var(--primary)]/10 transition-all duration-300">
							<div class="relative flex flex-col gap-8 lg:flex-row">
								<div class="relative aspect-video sm:aspect-[2/1] lg:aspect-square lg:w-64 lg:shrink-0">
									<img 
										src={post.data.heroImage} 
										alt="" 
										class="absolute inset-0 size-full rounded-lg bg-[var(--surface)] object-cover"
									/>
									<div class="absolute inset-0 rounded-lg ring-1 ring-inset ring-[var(--primary)]/20"></div>
								</div>
								<div>
									<div class="flex items-center gap-x-4 text-xs">
										<span class="text-[var(--text-muted)]">
											<FormattedDate date={post.data.pubDate} />
										</span>
										<a 
											href="#" 
											class="relative z-10 rounded-full bg-[var(--surface)] px-3 py-1.5 font-medium text-[var(--text)] hover:bg-[var(--primary)] hover:text-[var(--background)] transition-colors"
										>
											Desenvolvimento
										</a>
									</div>
									<div class="group relative max-w-xl">
										<h3 class="mt-3 text-lg/6 font-semibold text-[var(--text)] group-hover:text-[var(--primary)] transition-colors">
											<a href={`/blog/${post.slug}/`}>
												<span class="absolute inset-0"></span>
												{post.data.title}
											</a>
										</h3>
										<p class="mt-5 text-sm/6 text-[var(--text-muted)]">{post.data.description}</p>
									</div>
									<div class="mt-6 flex border-t border-[var(--primary)]/10 pt-6">
										<div class="relative flex items-center gap-x-4">
											<img src="/avatar.jpg" alt="" class="size-10 rounded-full bg-[var(--surface)]" />
											<div class="text-sm/6">
												<p class="font-semibold text-[var(--text)]">
													<a href="/about">
														<span class="absolute inset-0"></span>
														Gustavo Lopes Nomelini
													</a>
												</p>
												<p class="text-[var(--text-muted)]">Desenvolvedor Full Stack</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</article>
					))}
				</div>
			</div>
		</div>
	</section>
</Layout>
