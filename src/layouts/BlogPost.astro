---
import { SITE_TITLE } from '../consts';
import Layout from './Layout.astro';

export interface Props {
	title: string;
	description: string;
	pubDate: Date;
	updatedDate?: Date;
	heroImage?: string;
	author?: string;
	tags?: string[];
}

const { 
	title, 
	description, 
	pubDate, 
	updatedDate, 
	heroImage = '/images/blog/default-hero.jpg',
	author = 'PRODBYGUS',
	tags = []
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const fullTitle = `${title} | ${SITE_TITLE}`;
---

<Layout
	title={fullTitle}
	description={description}
	image={heroImage}
	ogType="article"
	publishedTime={pubDate.toISOString()}
	modifiedTime={updatedDate?.toISOString()}
>
	<div class="bg-white px-6 py-32 lg:px-8">
		<div class="mx-auto max-w-3xl text-base/7 text-gray-700">
			<p class="text-base/7 font-semibold text-indigo-600">Blog</p>
			<h1 class="mt-2 text-pretty text-4xl font-semibold tracking-tight text-gray-900 sm:text-5xl">{title}</h1>
			<div class="mt-4 flex items-center gap-x-4 text-sm text-gray-600">
				<time datetime={pubDate.toISOString()}>
					{pubDate.toLocaleDateString('pt-BR', {
						year: 'numeric',
						month: 'long',
						day: 'numeric'
					})}
				</time>
				{updatedDate && (
					<>
						<span>•</span>
						<time datetime={updatedDate.toISOString()}>
							Atualizado em {updatedDate.toLocaleDateString('pt-BR', {
								year: 'numeric',
								month: 'long',
								day: 'numeric'
							})}
						</time>
					</>
				)}
				<span>•</span>
				<span>{author}</span>
			</div>
			{tags.length > 0 && (
				<div class="mt-4 flex flex-wrap gap-2">
					{tags.map(tag => (
						<a
							href={`/tags/${tag}`}
							class="relative z-10 rounded-full bg-gray-50 px-3 py-1.5 font-medium text-gray-600 hover:bg-gray-100"
						>
							{tag}
						</a>
					))}
				</div>
			)}
			<p class="mt-6 text-xl/8">{description}</p>
			{heroImage && (
				<figure class="mt-16">
					<img class="aspect-video rounded-xl bg-gray-50 object-cover" src={heroImage} alt={title} />
				</figure>
			)}
			<div class="mt-16 max-w-2xl prose prose-lg prose-indigo">
				<slot />
			</div>
		</div>
	</div>
</Layout>
